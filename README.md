# System Design социальной сети для [курса по System Design](https://balun.courses/courses/system_design)
<hr>

#### Архитектура cпециальной социальной сети для путешественников

### Описание функциональных и нефункциональных требований 

#### Функциональные требования:

- публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
- оценка и комментарии постов других путешественников;
- подписка на других путешественников, чтобы следить за их активностью;
- поиск популярных мест для путешествий и просмотр постов с этих мест в виде ТОПа мест по странам и городам;
- общение с другими путешественниками в личных сообщениях;
- просмотр ленты других путешественников;
#### Нефункциональные требования:

- DAU 10 000 000
- сезонность есть (период отпусков, летний период) 
- Распределение DAU по сезонности: в сезон 10кк, не в сезон 2кк, опираясь на продажи тур фирм
- геораспределенность - нет (СНГ)
- доступность 99.95 
- в среднем 1 пользователь: 
- пишет 1 пост в день, пишет по 20 сообщений в чатах и комментариях
- к посту прикрепляет 1 фотографию размером 1МБ
- читает 50 постов в день, читает по 60 сообщений в чатах и комментариях
- время ожидания загрузки поста: не более 2с
- время доставки личного сообщения user1 -> user2: не более 5с
- лимит на кол-во подписчиков: 5кк
- лимит на кол-во подписок 500

### Расчет нагрузки на проектируемую систему в сезон
<hr>

RPS на чтение в чатах
```
RPS на чтение =
DAU * общее кол-во чтений в день на 1 пользователя / 86400

RPS(R) = 10кк * 60 / 86400 = 7к
```

RPS на запись в чатах
```
RPS на запись =
DAU * общее кол-во записей в день на 1 пользователя / 86400

RPS(W) = 10кк * 20 / 86400 = 2,3к
```

RPS на чтение комментариев
```
RPS(R) = 10кк * 60 / 86400 = 7к
```

RPS на запись комментариев
```
RPS(W) = 10кк * 20 / 86400 = 2,3к
```

RPS на чтение постов
```
RPS(R) = 10кк * 50 / 86400 = 5,8k
```

RPS на запись постов
```
RPS(W) = 10кк * 1 / 86400 = 115
```

Расчет размера, 1 поста
```
1 пост = ImgURL + Description + Geo + служебные поля
1 пост = 50Б + 4000Б + 16Б + 64Б = 4130Б ~= 4.1КБ
```

Расчет трафика чтения постов
```
5,8k * (1МБ + 4,1КБ) ~= 5 800 MB/c
```

Расчет трафика записи постов
```
115 * (1МБ + 4,1КБ) ~= 115 МБ/c
```

Расчет одновременных соедиений
```
10кк * 0.1 = 1кк 
```